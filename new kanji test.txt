<!DOCTYPE html>
<html lang="si">
<head>
  <meta charset="UTF-8">
  <title>JLPT Kanji Quiz</title>
  <style>
    body {
      font-family: 'Noto Sans Sinhala', sans-serif;
      max-width: 800px;
      margin: 30px auto;
      padding: 20px;
      border: 2px solid #444;
      border-radius: 8px;
      background: #fafafa;
      text-align: center;
    }
    h2,h3 { margin: 10px 0; }
    #levelMenu, #partMenu, #quizArea, #finalResultArea { display: none; }
    .optionBtn {
      display: block;
      width: 80%;
      margin: 10px auto;
      padding: 12px;
      font-size: 22px;
      border: 2px solid #666;
      border-radius: 6px;
      background: white;
      cursor: pointer;
    }
    .optionBtn:hover { background: #eee; }
    #kanjiBox {
      font-size: 160px;
      border: 2px solid #333;
      margin: 20px 0;
      padding: 10px;
      user-select: none;
    }
    #scoreBox {
      font-size: 20px;
      margin-bottom: 10px;
      font-weight: bold;
    }
    #resultMsg {
      font-size: 22px;
      font-weight: bold;
      margin-top: 15px;
      min-height: 30px;
    }
    #restartBtn {
      margin-top: 20px;
      padding: 10px 20px;
      font-size: 18px;
      background: #2196F3;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
    }
  </style>
</head>
<body>

  <h2>JLPT Kanji Quiz</h2>

  <!-- Level Select -->
  <div id="levelMenu">
    <h3>‡∂î‡∂∂‡∂ß ‡∂Ö‡∑Ä‡∑Å‡∑ä‚Äç‡∂∫ Level ‡∂ë‡∂ö ‡∂≠‡∑ù‡∂ª‡∂±‡∑ä‡∂±</h3>
    <button onclick="chooseLevel('N5')">N5 (103 Kanji)</button>
    <button onclick="chooseLevel('N4')">N4 (181 Kanji)</button>
    <button onclick="chooseLevel('N3')">N3 (363 Kanji)</button>
  </div>

  <!-- Part + Question Menu -->
  <div id="partMenu">
    <h3 id="levelTitle"></h3>
    <div id="parts"></div>
    <h3>‡∂¥‡∑ä‚Äç‡∂ª‡∑Å‡∑ä‡∂± ‡∂ú‡∂´‡∂± ‡∂≠‡∑ù‡∂ª‡∂±‡∑ä‡∂±</h3>
    <select id="questionCount">
      <option value="5">5</option>
      <option value="10" selected>10</option>
      <option value="20">20</option>
      <option value="all">‡∑É‡∑í‡∂∫‡∂Ω‡∑ä‡∂Ω</option>
    </select>
    <br><br>
    <button onclick="startQuiz()">üöÄ Start Quiz</button>
  </div>

  <!-- Quiz -->
  <div id="quizArea">
    <div id="scoreBox">Score: 0 / 0</div>
    <div id="kanjiBox">‰∏Ä</div>
    <div id="options"></div>
    <div id="resultMsg"></div>
  </div>

  <!-- Final Result -->
  <div id="finalResultArea">
    <h3>‡∂Ö‡∑Ä‡∑É‡∑è‡∂± ‡∂¥‡∑ä‚Äç‡∂ª‡∂≠‡∑í‡∂µ‡∂Ω</h3>
    <div id="finalResult"></div>
    <button id="restartBtn" onclick="showLevelMenu()">üîÑ ‡∂±‡∑ê‡∑Ä‡∂≠ ‡∂Ö‡∂ª‡∂π‡∂±‡∑ä‡∂±</button>
  </div>

<script>
  // üìå JLPT Kanji datasets
  const kanjiSets = {
   N5: [
  {kanji:"‰∏Ä", meaning:"‡∂ë‡∂ö"},
  {kanji:"‰∫å", meaning:"‡∂Ø‡∑ô‡∂ö"},
  {kanji:"‰∏â", meaning:"‡∂≠‡∑î‡∂±"},
  {kanji:"Âõõ", meaning:"‡∑Ñ‡∂≠‡∂ª"},
  {kanji:"‰∫î", meaning:"‡∂¥‡∑Ñ"},
  {kanji:"ÂÖ≠", meaning:"‡∑Ñ‡∂∫"},
  {kanji:"‰∏É", meaning:"‡∑Ñ‡∂≠"},
  {kanji:"ÂÖ´", meaning:"‡∂Ö‡∂ß"},
  {kanji:"‰πù", meaning:"‡∂±‡∑Ä‡∂∫"},
  {kanji:"ÂçÅ", meaning:"‡∂Ø‡∑Ñ‡∂∫"},
  {kanji:"Áôæ", meaning:"‡∑É‡∑í‡∂∫‡∂∫"},
  {kanji:"ÂçÉ", meaning:"‡∂Ø‡∑Ñ‡∑É"},
  {kanji:"‰∏á", meaning:"‡∂Ø‡∑Å‡∑É‡∑Ñ‡∑É"},
  {kanji:"ÂÜÜ", meaning:"‡∂∫‡∑ô‡∂±‡∑ä / ‡∂∏‡∑î‡∂Ø‡∂Ω‡∑ä"},
  {kanji:"‰∏ä", meaning:"‡∂â‡∑Ñ‡∑Ö"},
  {kanji:"‰∏ã", meaning:"‡∂¥‡∑Ñ‡∑Ö"},
  {kanji:"‰∏≠", meaning:"‡∂∏‡∑ê‡∂Ø / ‡∂≠‡∑î‡∂Ω"},
  {kanji:"Â§ß", meaning:"‡∂Ω‡∑ú‡∂ö‡∑î"},
  {kanji:"Â∞è", meaning:"‡∂ö‡∑î‡∂©‡∑è"},
  {kanji:"Êúà", meaning:"‡∑É‡∂≥ / ‡∂∏‡∑è‡∑É‡∂∫"},
  {kanji:"Êó•", meaning:"‡∂Ø‡∑Ä‡∑É / ‡∑É‡∑ñ‡∂ª‡∑í‡∂∫"},
  {kanji:"Âπ¥", meaning:"‡∂Ö‡∑Ä‡∑î‡∂ª‡∑î‡∂Ø‡∑ä‡∂Ø"},
  {kanji:"ÊôÇ", meaning:"‡∑Ä‡∑ö‡∂Ω‡∑è‡∑Ä"},
  {kanji:"ÂàÜ", meaning:"‡∂∏‡∑í‡∂±‡∑í‡∂≠‡∑ä‡∂≠‡∑î / ‡∂ö‡∑ú‡∂ß‡∑É"},
  {kanji:"‰ªä", meaning:"‡∂Ø‡∑ê‡∂±‡∑ä"},
  {kanji:"‰Ωï", meaning:"‡∂∏‡∑ú‡∂±‡∑Ä‡∑è‡∂Ø"},
  {kanji:"ÂÖà", meaning:"‡∂â‡∂Ø‡∑í‡∂ª‡∑í‡∂∫ / ‡∂¥‡∑ô‡∂ª"},
  {kanji:"ÊØé", meaning:"‡∑É‡∑ë‡∂∏ / ‡∑Ñ‡∑ê‡∂∏"},
  {kanji:"Âçà", meaning:"‡∂∏‡∂∞‡∑ä‚Äç‡∂∫‡∑Ñ‡∑ä‡∂±‡∂∫"},
  {kanji:"Ââç", meaning:"‡∂â‡∂Ø‡∑í‡∂ª‡∑í‡∂∫ / ‡∂¥‡∑ô‡∂ª"},
  {kanji:"Âæå", meaning:"‡∂¥‡∑É‡∑î / ‡∂¥‡∑É‡∑ô‡∂ö"},
  {kanji:"Èñì", meaning:"‡∂Ö‡∂≠‡∂ª / ‡∂Ö‡∂≠‡∂ª‡∂∏‡∂Ç"},
  {kanji:"Êù±", meaning:"‡∂±‡∑ê‡∂ú‡∑ô‡∂±‡∑Ñ‡∑í‡∂ª"},
  {kanji:"Ë•ø", meaning:"‡∂∂‡∂ß‡∑Ñ‡∑í‡∂ª"},
  {kanji:"Âçó", meaning:"‡∂Ø‡∂ö‡∑î‡∂´"},
  {kanji:"Âåó", meaning:"‡∂ã‡∂≠‡∑î‡∂ª"},
  {kanji:"Âè£", meaning:"‡∂∏‡∑ñ‡∂´ / ‡∂≠‡∑ú‡∂ß"},
  {kanji:"ÁõÆ", meaning:"‡∂á‡∑É"},
  {kanji:"ËÄ≥", meaning:"‡∂ö‡∂±"},
  {kanji:"Êâã", meaning:"‡∂Ö‡∂≠"},
  {kanji:"Ë∂≥", meaning:"‡∂¥‡∑è"},
  {kanji:"Âäõ", meaning:"‡∂∂‡∂Ω‡∂∫"},
  {kanji:"Áî∑", meaning:"‡∂¥‡∑î‡∂ª‡∑î‡∑Ç"},
  {kanji:"Â•≥", meaning:"‡∂ú‡∑ê‡∑Ñ‡∑ê‡∂´‡∑î"},
  {kanji:"Â≠ê", meaning:"‡∑Ö‡∂∏‡∂∫"},
  {kanji:"Áà∂", meaning:"‡∂≠‡∑è‡∂≠‡∑ä‡∂≠‡∑è"},
  {kanji:"ÊØç", meaning:"‡∂Ö‡∂∏‡∑ä‡∂∏‡∑è"},
  {kanji:"Âèã", meaning:"‡∂∫‡∑è‡∂Ω‡∑î‡∑Ä‡∑è"},
  {kanji:"‰∫∫", meaning:"‡∂∏‡∑í‡∂±‡∑í‡∑É‡∑è"},
  {kanji:"Âêç", meaning:"‡∂±‡∂∏"},
  {kanji:"ÂÖàÁîü", meaning:"‡∂ú‡∑î‡∂ª‡∑î"},
  {kanji:"ÂÖàÈÄ±", meaning:"‡∂¥‡∑É‡∑î‡∂ú‡∑í‡∂∫ ‡∑É‡∂≠‡∑í‡∂∫"},
  {kanji:"Êù•ÈÄ±", meaning:"‡∂â‡∂Ø‡∑í‡∂ª‡∑í ‡∑É‡∂≠‡∑í‡∂∫"},
  {kanji:"Â≠¶Ê†°", meaning:"‡∂¥‡∑è‡∑É‡∂Ω"},
  {kanji:"Áîü", meaning:"‡∂¢‡∑ì‡∑Ä‡∑í‡∂≠‡∂∫ / ‡∑É‡∑í‡∑É‡∑î"},
  {kanji:"Â≠¶", meaning:"‡∂â‡∂ú‡∑ô‡∂±‡∑ì‡∂∏"},
  {kanji:"Ê†°", meaning:"‡∂¥‡∑è‡∑É‡∂Ω"},
  {kanji:"ÂÖ•", meaning:"‡∂á‡∂≠‡∑î‡∂Ω‡∑ä ‡∑Ä‡∑ì‡∂∏"},
  {kanji:"Âá∫", meaning:"‡∂¥‡∑í‡∂ß‡∑Ä‡∑ì‡∂∏"},
  {kanji:"Ë°å", meaning:"‡∂∫‡∂±‡∑Ä‡∑è"},
  {kanji:"Êù•", meaning:"‡∂ë‡∂±‡∑Ä‡∑è"},
  {kanji:"Â∏∞", meaning:"‡∂Ü‡∂¥‡∑É‡∑î ‡∂∫‡∂±‡∑Ä‡∑è"},
  {kanji:"Ë¶ã", meaning:"‡∂∂‡∂Ω‡∂±‡∑Ä‡∑è"},
  {kanji:"ËÅû", meaning:"‡∂Ö‡∑Ñ‡∂±‡∑Ä‡∑è"},
  {kanji:"Ë©±", meaning:"‡∂ö‡∂≠‡∑è ‡∂ö‡∂ª‡∂±‡∑Ä‡∑è"},
  {kanji:"Ë®Ä", meaning:"‡∂ö‡∑í‡∂∫‡∂±‡∑Ä‡∑è"},
  {kanji:"Ë™≠", meaning:"‡∂ö‡∑í‡∂∫‡∑Ä‡∂±‡∑Ä‡∑è"},
  {kanji:"Êõ∏", meaning:"‡∂Ω‡∑í‡∂∫‡∂±‡∑Ä‡∑è"},
  {kanji:"È£ü", meaning:"‡∂ö‡∂±‡∑Ä‡∑è"},
  {kanji:"È£≤", meaning:"‡∂∂‡∑ú‡∂±‡∑Ä‡∑è"},
  {kanji:"Ë≤∑", meaning:"‡∂ú‡∂±‡∑ä‡∂±‡∑Ä‡∑è"},
  {kanji:"Â£≤", meaning:"‡∑Ä‡∑í‡∂ö‡∑í‡∂´‡∂±‡∑Ä‡∑è"},
  {kanji:"‰ºë", meaning:"‡∑Ä‡∑í‡∑Ä‡∑ö‡∂ö‡∂∫"},
  {kanji:"Ëªä", meaning:"‡∂ª‡∂Æ‡∂∫ / ‡∂ö‡∑è‡∂ª‡∂∫"},
  {kanji:"ÈßÖ", meaning:"‡∂ª‡∑ô‡∂Ω‡∑ä ‡∂ú‡∑ö‡∂ß‡∑ä‡∂ß‡∑î‡∑Ä"},
  {kanji:"ÈÅì", meaning:"‡∂∏‡∑è‡∂ª‡∑ä‡∂ú‡∂∫"},
  {kanji:"Â±±", meaning:"‡∂ö‡∂±‡∑ä‡∂Ø"},
  {kanji:"Â∑ù", meaning:"‡∂ú‡∂ü"},
  {kanji:"Èõ®", meaning:"‡∑Ä‡∑ê‡∑É‡∑ä‡∑É"},
  {kanji:"Â§©", meaning:"‡∂â‡∑Ñ‡∑Ö / ‡∂Ø‡∑ö‡∑Ä"},
  {kanji:"Á©∫", meaning:"‡∂Ö‡∑Ñ‡∑É / ‡∑Ñ‡∑í‡∑É‡∑ä"},
  {kanji:"ÁÅ´", meaning:"‡∂ú‡∑í‡∂±‡∑ä‡∂±"},
  {kanji:"Ê∞¥", meaning:"‡∑Ä‡∂≠‡∑î‡∂ª"},
  {kanji:"Êú®", meaning:"‡∂ú‡∑É / ‡∂Ω‡∑ì"},
  {kanji:"Èáë", meaning:"‡∂∏‡∑î‡∂Ø‡∂Ω‡∑ä / ‡∂ª‡∑í‡∂Ø‡∑ì"},
  {kanji:"Âúü", meaning:"‡∂¥‡∑É"},
  {kanji:"Ëä±", meaning:"‡∂∏‡∂Ω"},
  {kanji:"Ëçâ", meaning:"‡∂á‡∂Ω / ‡∂ú‡∑É‡∑ä ‡∂ö‡∑ú‡∑Ö"},
  {kanji:"Á´π", meaning:"‡∂∂‡∂π‡∂ª ‡∂ú‡∑É‡∑ä"},
  {kanji:"Á≥∏", meaning:"‡∂±‡∑ñ‡∂Ω‡∑ä"},
  {kanji:"Á±≥", meaning:"‡∂Ö‡∂ª‡∑Ñ"},
  {kanji:"Ë≤ù", meaning:"‡∂ú‡∑Ä‡∑í‡∂∫‡∑è"},
  {kanji:"Áü≥", meaning:"‡∂ú‡∂Ω‡∑ä"},
  {kanji:"Áä¨", meaning:"‡∂∂‡∂Ω‡∑ä‡∂Ω‡∑è"},
  {kanji:"È≠ö", meaning:"‡∂∏‡∑è‡∑Ö‡∑î"},
  {kanji:"È≥•", meaning:"‡∂ö‡∑î‡∂ª‡∑î‡∂Ω‡∑ä‡∂Ω‡∑è"},
  {kanji:"È¶¨", meaning:"‡∂Ö‡∑Å‡∑ä‡∑Ä‡∂∫"},
  {kanji:"ÈßÖ", meaning:"‡∑É‡∑ä‡∂Æ‡∑è‡∂±‡∂∫"},
  {kanji:"Á§æ", meaning:"‡∑É‡∂∏‡∑è‡∂ú‡∂∏ / ‡∂Ü‡∂∫‡∂≠‡∂±‡∂∫"},
  {kanji:"Èõª", meaning:"‡∑Ä‡∑í‡∂Ø‡∑î‡∂Ω‡∑í‡∂∫"},
  {kanji:"Ë™û", meaning:"‡∂∑‡∑è‡∑Ç‡∑è‡∑Ä"},
  {kanji:"ÂõΩ", meaning:"‡∂ª‡∂ß"},
  {kanji:"ÂÜÜ", meaning:"‡∂∫‡∑ô‡∂±‡∑ä"},
  {kanji:"ÁôΩ", meaning:"‡∑É‡∑î‡∂Ø‡∑î"},
  {kanji:"Ëµ§", meaning:"‡∂ª‡∂≠‡∑î"},
  {kanji:"Èùí", meaning:"‡∂±‡∑í‡∂Ω‡∑ä"},
  {kanji:"Èªí", meaning:"‡∂ö‡∂Ω‡∑î"},
  {kanji:"‰∏äÊâã", meaning:"‡∑Ñ‡∑ú‡∂≥‡∑í‡∂±‡∑ä ‡∂ö‡∂ª‡∂±‡∑Ä‡∑è"},
  {kanji:"‰∏ãÊâã", meaning:"‡∂Ö‡∂©‡∑î / ‡∑Ñ‡∑ú‡∂≥ ‡∂±‡∑ê‡∂≠‡∑í"},
],
    N4: [
      {kanji:"‰Ωì", meaning:"‡∑Å‡∂ª‡∑ì‡∂ª‡∂∫"}, {kanji:"‰ºö", meaning:"‡∑É‡∂∏‡∂ü‡∑Ä‡∑ì‡∂∏"}, {kanji:"‰Ωè", meaning:"‡∂¥‡∂Ø‡∑í‡∂Ç‡∂†‡∑í‡∂∫"},
      {kanji:"‰ø°", meaning:"‡∑Ä‡∑í‡∑Å‡∑ä‡∑Ä‡∑è‡∑É‡∂∫"}, {kanji:"ÂÉç", meaning:"‡∑Ä‡∑ê‡∂© ‡∂ö‡∂ª‡∂±‡∑Ä‡∑è"}, {kanji:"Âåª", meaning:"‡∑Ä‡∑õ‡∂Ø‡∑ä‚Äç‡∂∫"}
      // üëâ N4 ‡∂ë‡∂ö‡∂ß 181 Kanji
    ],
    N3: [
      {kanji:"ÊÑõ", meaning:"‡∂Ü‡∂Ø‡∂ª‡∂∫"}, {kanji:"Ê°à", meaning:"‡∂∫‡∑ù‡∂¢‡∂±‡∑è‡∑Ä"}, {kanji:"‰ª•", meaning:"‡∂Ö‡∂∫‡∂≠‡∑ä"},
      {kanji:"‰Ωç", meaning:"‡∂≠‡∂≠‡∑ä‡∂≠‡∑ä‡∑Ä‡∂∫"}, {kanji:"Âì°", meaning:"‡∂Ö‡∂Ø‡∑è‡∂Ω ‡∂¥‡∑î‡∂Ø‡∑ä‡∂ú‡∂Ω‡∂∫‡∑ô‡∂ö‡∑ä"}
      // üëâ N3 ‡∂ë‡∂ö‡∂ß 363 Kanji
    ]
  };

  // ============ Script Logic ============
  let selectedLevel = null;
  let selectedData = [];
  let currentKanji = null;
  let score = 0, attempts = 0, asked = 0, totalQuestions = 0;

  const levelMenu = document.getElementById("levelMenu");
  const partMenu = document.getElementById("partMenu");
  const levelTitle = document.getElementById("levelTitle");
  const partsDiv = document.getElementById("parts");
  const quizArea = document.getElementById("quizArea");
  const kanjiBox = document.getElementById("kanjiBox");
  const optionsDiv = document.getElementById("options");
  const resultMsg = document.getElementById("resultMsg");
  const scoreBox = document.getElementById("scoreBox");
  const finalResultArea = document.getElementById("finalResultArea");
  const finalResult = document.getElementById("finalResult");

  showLevelMenu();

  function showLevelMenu() {
    levelMenu.style.display = "block";
    partMenu.style.display = "none";
    quizArea.style.display = "none";
    finalResultArea.style.display = "none";
  }

  function chooseLevel(level) {
    selectedLevel = level;
    levelTitle.textContent = `${level} Level - Kanji ${kanjiSets[level].length}‡∂ö‡∑ä ‡∂á‡∂≠`;
    levelMenu.style.display = "none";
    partMenu.style.display = "block";
    partsDiv.innerHTML = "";

    const data = kanjiSets[level];
    let chunks = [];
    for (let i=0; i<data.length; i+=10) chunks.push(data.slice(i,i+10));

    chunks.forEach((p,i)=>{
      const cb=document.createElement("input");
      cb.type="checkbox"; cb.id="part"+i; cb.value=i;
      const lbl=document.createElement("label");
      lbl.htmlFor="part"+i;
      lbl.textContent=`Part ${i+1} (Kanji ${i*10+1} ‚Äì ${i*10+p.length})`;
      partsDiv.appendChild(cb);
      partsDiv.appendChild(lbl);
      partsDiv.appendChild(document.createElement("br"));
    });
  }

  function startQuiz() {
    selectedData=[];
    const data=kanjiSets[selectedLevel];
    for(let i=0;i<data.length;i+=10){
      const cb=document.getElementById("part"+(i/10));
      if(cb && cb.checked) selectedData=selectedData.concat(data.slice(i,i+10));
    }
    if(selectedData.length===0){ alert("‡∂ö‡∂ª‡∑î‡∂´‡∑è‡∂ö‡∂ª ‡∂ö‡∑ú‡∂ß‡∑É‡∑ä ‡∂≠‡∑ù‡∂ª‡∂±‡∑ä‡∂±!"); return; }

    const qSel=document.getElementById("questionCount").value;
    totalQuestions=(qSel==="all")?selectedData.length:parseInt(qSel);

    score=0;attempts=0;asked=0;updateScore();
    partMenu.style.display="none";quizArea.style.display="block";
    nextKanji();
  }

  function updateScore(){ scoreBox.textContent=`Score: ${score} / ${attempts}`; }

  function nextKanji(){
    if(asked>=totalQuestions){ showFinalResult(); return; }
    resultMsg.textContent=""; optionsDiv.innerHTML="";
    currentKanji=selectedData[Math.floor(Math.random()*selectedData.length)];
    kanjiBox.textContent=currentKanji.kanji;

    let options=[currentKanji.meaning];
    while(options.length<4){
      const wrong=selectedData[Math.floor(Math.random()*selectedData.length)].meaning;
      if(!options.includes(wrong)) options.push(wrong);
    }
    options.sort(()=>Math.random()-0.5);

    options.forEach(opt=>{
      const btn=document.createElement("button");
      btn.className="optionBtn"; btn.textContent=opt;
      btn.onclick=()=>checkAnswer(opt);
      optionsDiv.appendChild(btn);
    });
    asked++;
  }

  function checkAnswer(selected){
    attempts++;
    if(selected===currentKanji.meaning){
      score++; resultMsg.textContent="‚úÖ ‡∑Ñ‡∂ª‡∑í!"; resultMsg.style.color="green";
      updateScore(); setTimeout(nextKanji,1000);
    } else {
      resultMsg.textContent="‚ùå ‡∑Ä‡∑ê‡∂ª‡∂Ø‡∑í"; resultMsg.style.color="red";
      updateScore();
    }
  }

  function showFinalResult(){
    quizArea.style.display="none"; finalResultArea.style.display="block";
    let percent=Math.round((score/attempts)*100);
    let grade=percent>=80?"A":percent>=60?"B":percent>=40?"C":"F";
    finalResult.innerHTML=`‚úÖ ‡∂Ö‡∑Ä‡∑É‡∑è‡∂± ‡∂¥‡∑ä‚Äç‡∂ª‡∂≠‡∑í‡∂µ‡∂Ω:<br>‡∂î‡∂∂‡∂ú‡∑ö Score: ${score} / ${attempts}<br>Percentage: ${percent}%<br>Grade: ${grade}`;
  }
</script>

</body>
</html>
